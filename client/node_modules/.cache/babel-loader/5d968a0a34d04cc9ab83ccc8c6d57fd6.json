{"ast":null,"code":"import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\n\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n  var fromRange = fromMax - fromMin,\n      toRange = toMax - toMin,\n      toValue;\n\n  if (fromRange === 0) {\n    return toMin + toRange / 2;\n  }\n\n  if (toRange === 0) {\n    return toMin;\n  }\n\n  toValue = (fromValue - fromMin) / fromRange;\n  toValue = toRange * toValue + toMin;\n  return toValue;\n}\n\nexport const Enhance = function (imageData) {\n  var data = imageData.data,\n      nSubPixels = data.length,\n      rMin = data[0],\n      rMax = rMin,\n      r,\n      gMin = data[1],\n      gMax = gMin,\n      g,\n      bMin = data[2],\n      bMax = bMin,\n      b,\n      i;\n  var enhanceAmount = this.enhance();\n\n  if (enhanceAmount === 0) {\n    return;\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    r = data[i + 0];\n\n    if (r < rMin) {\n      rMin = r;\n    } else if (r > rMax) {\n      rMax = r;\n    }\n\n    g = data[i + 1];\n\n    if (g < gMin) {\n      gMin = g;\n    } else if (g > gMax) {\n      gMax = g;\n    }\n\n    b = data[i + 2];\n\n    if (b < bMin) {\n      bMin = b;\n    } else if (b > bMax) {\n      bMax = b;\n    }\n  }\n\n  if (rMax === rMin) {\n    rMax = 255;\n    rMin = 0;\n  }\n\n  if (gMax === gMin) {\n    gMax = 255;\n    gMin = 0;\n  }\n\n  if (bMax === bMin) {\n    bMax = 255;\n    bMin = 0;\n  }\n\n  var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n\n  if (enhanceAmount > 0) {\n    rGoalMax = rMax + enhanceAmount * (255 - rMax);\n    rGoalMin = rMin - enhanceAmount * (rMin - 0);\n    gGoalMax = gMax + enhanceAmount * (255 - gMax);\n    gGoalMin = gMin - enhanceAmount * (gMin - 0);\n    bGoalMax = bMax + enhanceAmount * (255 - bMax);\n    bGoalMin = bMin - enhanceAmount * (bMin - 0);\n  } else {\n    rMid = (rMax + rMin) * 0.5;\n    rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n    rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n    gMid = (gMax + gMin) * 0.5;\n    gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n    gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n    bMid = (bMax + bMin) * 0.5;\n    bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n    bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n    data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n    data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n  }\n};\nFactory.addGetterSetter(Node, 'enhance', 0, getNumberValidator(), Factory.afterSetFilter);","map":{"version":3,"sources":["/Users/stevec/Codeclan_Work/Group_Project/SnakesAndLadders/client/node_modules/konva/lib/filters/Enhance.js"],"names":["Factory","Node","getNumberValidator","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","toValue","Enhance","imageData","data","nSubPixels","length","rMin","rMax","r","gMin","gMax","g","bMin","bMax","b","i","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","addGetterSetter","afterSetFilter"],"mappings":"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","sourcesContent":["import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    var fromRange = fromMax - fromMin, toRange = toMax - toMin, toValue;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nexport const Enhance = function (imageData) {\n    var data = imageData.data, nSubPixels = data.length, rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b, i;\n    var enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nFactory.addGetterSetter(Node, 'enhance', 0, getNumberValidator(), Factory.afterSetFilter);\n"]},"metadata":{},"sourceType":"module"}